<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="utf-8" /> <!-- multi-device width --> <meta content="width=device-width, initial-scale=1" name="viewport" /> <!-- site description --> <meta content="Sharing my cgit nginx config with the internet" name="description" /> <!-- referer for 3rd-part images--> <meta content="no-referrer" name="referrer" /> <!-- title --> <title> Cgit Nginx Php Config </title> <!-- icon --> <link href="/assets/img/logo/isolated-monochrome-white.svg" rel="shortcut icon bookmark" type="image/x-icon" /> <!-- main stylesheet --> <link rel="stylesheet" href="/assets/css/first.css" type="text/css" /> <!-- rouge theme--> <link href="/assets/css/later.css" rel="stylesheet" rel="preload" as="style" /> <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" rel="preload" as="style" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous" /> <noscript> <link rel="stylesheet" href="/assets/css/later.css" /></noscript> <!--link rel="stylesheet" href="/assets/css/mystyles.css"--> --- --- <!--<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.3/lib/darkmode-js.min.js" ></script>--> <script async src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script> <script src="/assets/js/main.js"></script> <!--script defer src="https:// cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Cgit Nginx Php Config | Karmanyaah Malhotra</title> <meta name="generator" content="Jekyll v4.1.1" /> <meta property="og:title" content="Cgit Nginx Php Config" /> <meta name="author" content="Karmanyaah" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Sharing my cgit nginx config with the internet" /> <meta property="og:description" content="Sharing my cgit nginx config with the internet" /> <link rel="canonical" href="https://karmanyaah.malhotra.cc/notes/2020/12/cgit-nginx-php-config/" /> <meta property="og:url" content="https://karmanyaah.malhotra.cc/notes/2020/12/cgit-nginx-php-config/" /> <meta property="og:site_name" content="Karmanyaah Malhotra" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2020-12-17T02:42:00-05:00" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Karmanyaah"},"headline":"Cgit Nginx Php Config","dateModified":"2020-12-17T02:58:21-05:00","datePublished":"2020-12-17T02:42:00-05:00","description":"Sharing my cgit nginx config with the internet","url":"https://karmanyaah.malhotra.cc/notes/2020/12/cgit-nginx-php-config/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://karmanyaah.malhotra.cc/notes/2020/12/cgit-nginx-php-config/"},"@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> <link type="application/atom+xml" rel="alternate" href="https://karmanyaah.malhotra.cc/feed.xml" title="Karmanyaah Malhotra" /> </head> <body class="page"> <div class="div_bg"> <canvas id="c"></canvas> </div> <div class="container" id="ctner"> <div class="header"> <nav class="nav_bar"> <span> <!-- left header --> <!-- home --> <span class="li_left"> <a class="header_btn" href="/"> <i class="fa fa-home"> <p class="btn_text">Home</p> </i> </a> </span> <!-- email --> <!-- github --> <span class="li_left"> <a class="header_btn" href="https://github.com/karmanyaahm/karmanyaahm.github.io"> <i class="fa fa-github"> <p class="btn_text">Github</p> </i> </a> </span> <!-- maximize --> <span class="li_left"> <a class="header_btn" id="mxmz_btn" onclick="toggle_maximize()"> <i class="fa fa-window-maximize"> <p class="btn_text" id="mxmz_text">Maximize</p> </i> </a> </span> <!-- access token --> <!-- right header --> <span class="span_right"> <!-- popup table of content --> Karmanyaah Malhotra </a> </span> </span> </nav> <hr /> </div> <!-- table of content --> <!-- toggle maximize --> <script> var ctner_state = 0; var ctner = document.getElementById("ctner"); function toggle_maximize() { if (ctner_state == 0) { ctner.style.width = "100%"; ctner.style.height = "100%"; ctner.style.top = "0"; ctner.style.maxWidth = "100%"; if (document.getElementById("mxmz_text")) { document.getElementById("mxmz_text").innerHTML = "Restore"; } ctner_state = 1; } else if (ctner_state == 1) { ctner.style.width = "84%"; ctner.style.height = "97%"; ctner.style.top = "2%"; ctner.style.maxWidth = "1240px"; if (document.getElementById("mxmz_text")) { document.getElementById("mxmz_text").innerHTML = "Maximize"; } ctner_state = 0; } } </script> <!-- encrypt and decrypt --> <div class="div_article" id="div_atcl"> <article id="main_atcl" itemscope itemtype="http://schema.org/BlogPosting"> <h1> Cgit Nginx Php Config </h1> <div class="post_info"> <!-- author --> <span> <i class="fa fa-user-secret"></i> Karmanyaah </span> <!-- date --> <span> <i class="fa fa-calendar"></i> Dec 17, 2020 </span> <!-- category --> <span> <i class="fa fa-archive"></i> Notes </span> </div> <!-- abstract --> <div class="abstract"> </div> <p>Sharing my cgit nginx config with the internet</p> <p>So recently, I was looking for a way to setup cgit under a subdomain (/git/) using nginx. I was able to find some ways to do this with the static assets under a different directory (for example /cgit/), but I wanted to consolidate it. It’s nothing too complicated but here’s the configuration I ended up using.</p> <p><strong>Nginx Config</strong></p> <div class="language-nginx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">server</span> <span class="p">{</span>

    <span class="kn">listen</span> <span class="mi">8181</span> <span class="p">;</span>
    <span class="kn">server_name</span> <span class="s">homenet.malhotra.cc</span> <span class="p">;</span>

    <span class="kn">location</span> <span class="n">/git/</span> <span class="p">{</span>
        <span class="kn">root</span> <span class="n">/usr/share/webapps/cgit</span><span class="p">;</span>

        <span class="kn">location</span> <span class="p">~</span> <span class="sr">^/git/(cgit|favicon)\.(ico|png|css)$</span> <span class="p">{</span>
            <span class="kn">try_files</span> <span class="n">/</span><span class="nv">$1</span><span class="s">.</span><span class="nv">$2</span> <span class="p">=</span><span class="mi">403</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="kn">include</span> <span class="s">fastcgi_params</span><span class="p">;</span>
        <span class="kn">fastcgi_split_path_info</span> <span class="s">^(/git)(/.*)</span>$<span class="p">;</span>
        <span class="kn">fastcgi_param</span> <span class="s">PATH_INFO</span> <span class="nv">$fastcgi_path_info</span><span class="p">;</span>
        <span class="kn">fastcgi_param</span> <span class="s">DOCUMENT_ROOT</span> <span class="nv">$document_root</span><span class="p">;</span>
        <span class="kn">fastcgi_param</span> <span class="s">SCRIPT_FILENAME</span> <span class="nv">$document_root</span><span class="n">/cgit.cgi</span><span class="p">;</span>
        <span class="kn">fastcgi_pass</span> <span class="s">unix:/run/fcgiwrap.sock</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div></div> <p><strong>Cgit Config</strong></p> <div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">css</span><span class="p">=</span><span class="s">/git/cgit.css</span>
<span class="py">logo</span><span class="p">=</span><span class="s">/git/cgit.png</span>
<span class="py">favicon</span><span class="p">=</span><span class="s">/git/favicon.ico</span>
<span class="py">virtual-root</span><span class="p">=</span><span class="s">/git</span>
</code></pre></div></div> <p>The cgit instance is currently at <a href="http://homenet.malhotra.cc/git/">homenet.malhotra.cc</a> but will probably move.</p> <p>The (probably) most recent version can be found on <a href="https://gitlab.com/karmanyaahm/infrastructure">GitLab</a> (haha still not cgit for my critical stuff yet)</p> <h1>Latest Posts</h1> <ul> <li> <b><a href="/notes/2020/12/cgit-nginx-php-config/">Cgit Nginx Php Config</a></b> <p><p>Sharing my cgit nginx config with the internet</p> </p> </li> <li> <b><a href="/linux/2020/11/adventures-with-the-aur/">Adventures With The Aur</a></b> <p><p>My first time contributing to the AUR …</p> </p> </li> <li> <b><a href="/meta/2020/11/site-fixing/">Site fixing</a></b> <p><p>So I’m back to fixing my website now!</p> </p> </li> <li> <b><a href="/meta/2019/12/intro-to-jekyll/">Intro to jekyll</a></b> <p><p>Got started with jekyll for my site today</p> </p> </li> <li><a href="/blog/">More</a></li> </ul> </article> <div id="counterBlocked"> There was an error. It is possible this is due to an ad blocker or a tracking blocker. This site only uses an <a href="https://www.goatcounter.com/privacy" >anonymous and privacy-friendly pageview counter</a > to assess the popularity of blog posts. </div> <div class="footer"> <nav class="nav_bar"> <ul> <li class="copyright">© 2020 </li> <li>All Rights Reserved?</li> <li> <a class="" href="/feed.xml"> <i class="fa fa-rss"></i> Atom Feed </a> </li> </ul> </nav> </div> </div> </div> </body><!-- background animations --> <script> var c = document.getElementById("c"); var ctx = c.getContext("2d"); c.height = window.innerHeight; c.width = window.innerWidth; var txts = "αβγδεζηθικλμνξοπρστυφχψω∷∫∮∝∞∧∨∑∏∪∩∈∵∴⊥‖∠⌒⊙≌√"; txts = txts.split(""); var font_size = 12; var columns = c.width / font_size; var drops = []; for (var x = 0; x < columns; x++) drops[x] = 1; function draw() { ctx.fillStyle = "rgba(0, 0, 0, 0.05)"; ctx.fillRect(0, 0, c.width, c.height); ctx.fillStyle = "#490"; ctx.font = font_size + "px arial"; for (var i = 0; i < drops.length; i++) { var text = txts[Math.floor(Math.random() * txts.length)]; ctx.fillText(text, i * font_size, drops[i] * font_size); if (drops[i] * font_size > c.height || Math.random() > 0.98) drops[i] = 0; drops[i]++; } } setInterval(draw, 20); </script> <script data-goatcounter="https://kar.goatcounter.com/count" async src="/assets/js/count.js" onerror="goatCounterBlocked()" ></script> </html>
